<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ouroboros.Consensus.Storage.LedgerDB.InMemory</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ouroboros-consensus-0.1.0.0: Consensus layer for the Ouroboros blockchain protocol</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Storage.LedgerDB.InMemory</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">LedgerDB proper</a><ul><li><a href="#g:2">ChainSummary</a></li><li><a href="#g:3">Queries</a></li><li><a href="#g:4">Past ledger states</a></li><li><a href="#g:5">Running updates</a></li><li><a href="#g:6">Updates</a></li></ul></li><li><a href="#g:7">Exports for the benefit of tests</a><ul><li><a href="#g:8">Additional queries</a></li><li><a href="#g:9">Pure API</a></li></ul></li></ul></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:LedgerDB">LedgerDB</a> l r</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:LedgerDbParams">LedgerDbParams</a> = <a href="#v:LedgerDbParams">LedgerDbParams</a> {<ul class="subs"><li><a href="#v:ledgerDbSecurityParam">ledgerDbSecurityParam</a> &#8759; <a href="Ouroboros-Consensus-Config-SecurityParam.html#t:SecurityParam" title="Ouroboros.Consensus.Config.SecurityParam">SecurityParam</a></li></ul>}</li><li class="src short"><a href="#v:ledgerDbDefaultParams">ledgerDbDefaultParams</a> &#8759; <a href="Ouroboros-Consensus-Config-SecurityParam.html#t:SecurityParam" title="Ouroboros.Consensus.Config.SecurityParam">SecurityParam</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a></li><li class="src short"><a href="#v:ledgerDbWithAnchor">ledgerDbWithAnchor</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r</li><li class="src short"><a href="#v:ledgerDbFromGenesis">ledgerDbFromGenesis</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; l &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r</li><li class="src short"><span class="keyword">data</span> <a href="#t:ChainSummary">ChainSummary</a> l r = <a href="#v:ChainSummary">ChainSummary</a> {<ul class="subs"><li><a href="#v:csTip">csTip</a> &#8759; !(<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r)</li><li><a href="#v:csLength">csLength</a> &#8759; !<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li><li><a href="#v:csLedger">csLedger</a> &#8759; !l</li></ul>}</li><li class="src short"><a href="#v:encodeChainSummary">encodeChainSummary</a> &#8759; (l &#8594; Encoding) &#8594; (r &#8594; Encoding) &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; Encoding</li><li class="src short"><a href="#v:decodeChainSummary">decodeChainSummary</a> &#8759; (&#8704; s. Decoder s l) &#8594; (&#8704; s. Decoder s r) &#8594; &#8704; s. Decoder s (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</li><li class="src short"><a href="#v:ledgerDbCurrent">ledgerDbCurrent</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; l</li><li class="src short"><a href="#v:ledgerDbTip">ledgerDbTip</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r</li><li class="src short"><a href="#v:ledgerDbAnchor">ledgerDbAnchor</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r</li><li class="src short"><a href="#v:ledgerDbPast">ledgerDbPast</a> &#8759; &#8704; l r ro. (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> ro, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r) &#8658; (r &#8594; ro) &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> l</li><li class="src short"><a href="#v:ledgerDbPastLedgers">ledgerDbPastLedgers</a> &#8759; (l &#8594; a) &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; (a, <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Data-Sequence-Strict.html#t:StrictSeq" title="Data.Sequence.Strict">StrictSeq</a> a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Ap">Ap</a> &#8759; (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <span class="keyword">where</span><ul class="subs"><li><a href="#v:ReapplyVal">ReapplyVal</a> &#8759; r &#8594; b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b ()</li><li><a href="#v:ApplyVal">ApplyVal</a> &#8759; r &#8594; b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ThrowsLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ThrowsLedgerError</a> l r m)</li><li><a href="#v:ReapplyRef">ReapplyRef</a> &#8759; r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolvesBlocks" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolvesBlocks</a> r b m)</li><li><a href="#v:ApplyRef">ApplyRef</a> &#8759; r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolvesBlocks" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolvesBlocks</a> r b m, <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ThrowsLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ThrowsLedgerError</a> l r m)</li><li><a href="#v:Weaken">Weaken</a> &#8759; c' &#8658; c &#8658; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c'</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:AnnLedgerError">AnnLedgerError</a> l r = <a href="#v:AnnLedgerError">AnnLedgerError</a> {<ul class="subs"><li><a href="#v:annLedgerState">annLedgerState</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r</li><li><a href="#v:annLedgerErrRef">annLedgerErrRef</a> &#8759; r</li><li><a href="#v:annLedgerErr">annLedgerErr</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ResolveBlock">ResolveBlock</a> m r b = r &#8594; m b</li><li class="src short"><span class="keyword">class</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="#t:ResolvesBlocks">ResolvesBlocks</a> r b m | m &#8594; b <span class="keyword">where</span><ul class="subs"><li><a href="#v:resolveBlock">resolveBlock</a> &#8759; r &#8594; m b</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="#t:ThrowsLedgerError">ThrowsLedgerError</a> l r m <span class="keyword">where</span><ul class="subs"><li><a href="#v:throwLedgerError">throwLedgerError</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; r &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l &#8594; m a</li></ul></li><li class="src short"><a href="#v:defaultThrowLedgerErrors">defaultThrowLedgerErrors</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) m a &#8594; m (<a href="Ouroboros-Consensus-HardFork-Combinator-Degenerate.html#t:Either" title="Ouroboros.Consensus.HardFork.Combinator.Degenerate">Either</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) a)</li><li class="src short"><a href="#v:defaultResolveBlocks">defaultResolveBlocks</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m a &#8594; m a</li><li class="src short"><a href="#v:defaultResolveWithErrors">defaultResolveWithErrors</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m) a &#8594; m (<a href="Ouroboros-Consensus-HardFork-Combinator-Degenerate.html#t:Either" title="Ouroboros.Consensus.HardFork.Combinator.Degenerate">Either</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:ExceededRollback">ExceededRollback</a> = <a href="#v:ExceededRollback">ExceededRollback</a> {<ul class="subs"><li><a href="#v:rollbackMaximum">rollbackMaximum</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li><li><a href="#v:rollbackRequested">rollbackRequested</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li></ul>}</li><li class="src short"><a href="#v:ledgerDbPush">ledgerDbPush</a> &#8759; &#8704; m c l r b. (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, c) &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; m (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</li><li class="src short"><a href="#v:ledgerDbSwitch">ledgerDbSwitch</a> &#8759; (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, c) &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> &#8594; [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; m (<a href="Ouroboros-Consensus-HardFork-Combinator-Degenerate.html#t:Either" title="Ouroboros.Consensus.HardFork.Combinator.Degenerate">Either</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ExceededRollback" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ExceededRollback</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r))</li><li class="src short"><a href="#v:ledgerDbChainLength">ledgerDbChainLength</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li><li class="src short"><a href="#v:ledgerDbToList">ledgerDbToList</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; [(r, l)]</li><li class="src short"><a href="#v:ledgerDbMaxRollback">ledgerDbMaxRollback</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li><li class="src short"><a href="#v:ledgerDbSnapshots">ledgerDbSnapshots</a> &#8759; &#8704; l r. <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; [(<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>, l)]</li><li class="src short"><a href="#v:ledgerDbIsSaturated">ledgerDbIsSaturated</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:ledgerDbCountToPrune">ledgerDbCountToPrune</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:ledgerDbPastSpec">ledgerDbPastSpec</a> &#8759; &#8704; l r. <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r &#8658; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> l</li><li class="src short"><a href="#v:ledgerDbPush-39-">ledgerDbPush'</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b</li><li class="src short"><a href="#v:ledgerDbPushMany-39-">ledgerDbPushMany'</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; [b] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b</li><li class="src short"><a href="#v:ledgerDbSwitch-39-">ledgerDbSwitch'</a> &#8759; &#8704; l b. <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> &#8594; [b] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>LedgerDB proper</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LedgerDB" class="def">LedgerDB</a> l r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#LedgerDB" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></p><div class="doc"><p>Internal state of the ledger DB</p><p>The ledger DB looks like</p><pre>anchor |&gt; snapshots &lt;| current</pre><p>where <code>anchor</code> records the oldest known snapshot and <code>current</code> the most
 recent. The anchor is the oldest point we can roll back to.</p><p>We take a snapshot after each block is applied and keep in memory a window
 of the last <code>k</code> snapshots. We have verified empirically (#1936) that the
 overhead of keeping @k snapshots in memory is small, i.e., about 5%
 compared to keeping a snapshot every 100 blocks. This is thanks to sharing
 between consecutive snapshots.</p><p>As an example, suppose we have <code>k = 6</code>. The ledger DB grows as illustrated
 below, where we indicate the anchor number of blocks, the stored snapshots,
 and the current ledger.</p><pre>anchor |&gt; #   [ snapshots ]                   &lt;| tip
---------------------------------------------------------------------------
G      |&gt; (0) [ ]                             &lt;| G
G      |&gt; (1) [ L1]                           &lt;| L1
G      |&gt; (2) [ L1,  L2]                      &lt;| L2
G      |&gt; (3) [ L1,  L2,  L3]                 &lt;| L3
G      |&gt; (4) [ L1,  L2,  L3,  L4]            &lt;| L4
G      |&gt; (5) [ L1,  L2,  L3,  L4,  L5]       &lt;| L5
G      |&gt; (6) [ L1,  L2,  L3,  L4,  L5,  L6]  &lt;| L6
L1     |&gt; (6) [ L2,  L3,  L4,  L5,  L6,  L7]  &lt;| L7
L2     |&gt; (6) [ L3,  L4,  L5,  L6,  L7,  L8]  &lt;| L8
L3     |&gt; (6) [ L4,  L5,  L6,  L7,  L8,  L9]  &lt;| L9   (*)
L4     |&gt; (6) [ L5,  L6,  L7,  L8,  L9,  L10] &lt;| L10
L5     |&gt; (6) [*L6,  L7,  L8,  L9,  L10, L11] &lt;| L11
L6     |&gt; (6) [ L7,  L8,  L9,  L10, L11, L12] &lt;| L12
L7     |&gt; (6) [ L8,  L9,  L10, L12, L12, L13] &lt;| L13
L8     |&gt; (6) [ L9,  L10, L12, L12, L13, L14] &lt;| L14</pre><p>The ledger DB must guarantee that at all times we are able to roll back <code>k</code>
 blocks. For example, if we are on line (*), and roll back 6 blocks, we get</p><pre>L3 |&gt; []</pre></div><div class="subs instances"><details id="i:LedgerDB" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:GetTip:1"></span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:IsLedger" title="Ouroboros.Consensus.Ledger.Basics">IsLedger</a> l &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:GetTip" title="Ouroboros.Consensus.Ledger.Basics">GetTip</a> (<a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r))</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-686" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:GetTip:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getTip">getTip</a> &#8759; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> (<a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)) <a href="src/Ouroboros.Consensus.Ledger.Basics.html#getTip" class="link">Source</a> <a href="#v:getTip" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:Eq:2"></span> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> l) &#8658; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-149" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:Show:3"></span> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> r, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> l) &#8658; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-149" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:Generic:4"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-149" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) x &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:NoUnexpectedThunks:5"></span> (<a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> r, <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> l) &#8658; <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-149" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:NoUnexpectedThunks:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:noUnexpectedThunks">noUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:noUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:whnfNoUnexpectedThunks">whnfNoUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:whnfNoUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> &#8759; <a href="Data-SOP-Strict.html#t:Proxy" title="Data.SOP.Strict">Proxy</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:IsLedger:6"></span> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:IsLedger" title="Ouroboros.Consensus.Ledger.Basics">IsLedger</a> l, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> r, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r, <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> r) &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:IsLedger" title="Ouroboros.Consensus.Ledger.Basics">IsLedger</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-689" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:IsLedger:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Ouroboros.Consensus.Ledger.Basics.html#LedgerErr" class="link">Source</a> <a href="#t:LedgerErr" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:applyChainTick">applyChainTick</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) <a href="src/Ouroboros.Consensus.Ledger.Basics.html#applyChainTick" class="link">Source</a> <a href="#v:applyChainTick" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:GetTip:7"></span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:IsLedger" title="Ouroboros.Consensus.Ledger.Basics">IsLedger</a> l &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:GetTip" title="Ouroboros.Consensus.Ledger.Basics">GetTip</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-683" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:GetTip:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getTip">getTip</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) <a href="src/Ouroboros.Consensus.Ledger.Basics.html#getTip" class="link">Source</a> <a href="#v:getTip" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:ApplyBlock:8"></span> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l blk &#8658; <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)) blk</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-702" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:ApplyBlock:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:applyLedgerBlock">applyLedgerBlock</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)) &#8594; blk &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Except" title="Cardano.Prelude.Base">Except</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk))) (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)) <a href="src/Ouroboros.Consensus.Ledger.Abstract.html#applyLedgerBlock" class="link">Source</a> <a href="#v:applyLedgerBlock" class="selflink">#</a></p><p class="src"><a href="#v:reapplyLedgerBlock">reapplyLedgerBlock</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)) &#8594; blk &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)) &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk) <a href="src/Ouroboros.Consensus.Ledger.Abstract.html#reapplyLedgerBlock" class="link">Source</a> <a href="#v:reapplyLedgerBlock" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:Rep:9"></span> <span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-149" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:Rep:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:HeaderHash:10"></span> <span class="keyword">type</span> <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-681" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:HeaderHash:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">type</span> <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) = <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> l</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:Ticked:11"></span> <span class="keyword">data</span> <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-170" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc"><p>Ticking the ledger DB just ticks the current state</p><p>We don't push the new state into the DB until we apply a block.</p></td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:Ticked:11"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">data</span> <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) = <a id="v:TickedLedgerDB" class="def">TickedLedgerDB</a> {<ul class="inst"><li class="inst"><a id="v:tickedLedgerDbTicked" class="def">tickedLedgerDbTicked</a> &#8759; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> l</li><li class="inst"><a id="v:tickedLedgerDbOrig" class="def">tickedLedgerDbOrig</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r</li></ul>}</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:LedgerErr:12"></span> <span class="keyword">type</span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-695" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:LedgerErr:12"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">type</span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) = <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDB:LedgerCfg:13"></span> <span class="keyword">type</span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-679" class="link">Source</a> <a href="#t:LedgerDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDB:LedgerCfg:13"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">type</span> <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) = <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:LedgerDbParams" class="def">LedgerDbParams</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#LedgerDbParams" class="link">Source</a> <a href="#t:LedgerDbParams" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LedgerDbParams" class="def">LedgerDbParams</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ledgerDbSecurityParam" class="def">ledgerDbSecurityParam</a> &#8759; <a href="Ouroboros-Consensus-Config-SecurityParam.html#t:SecurityParam" title="Ouroboros.Consensus.Config.SecurityParam">SecurityParam</a></dfn><div class="doc"><p>Security parameter (maximum rollback)</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:LedgerDbParams" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDbParams:Eq:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a></span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-155" class="link">Source</a> <a href="#t:LedgerDbParams" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDbParams:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDbParams:Show:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a></span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-155" class="link">Source</a> <a href="#t:LedgerDbParams" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDbParams:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDbParams:Generic:3"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a></span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-155" class="link">Source</a> <a href="#t:LedgerDbParams" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDbParams:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> x &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDbParams:NoUnexpectedThunks:4"></span> <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a></span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-155" class="link">Source</a> <a href="#t:LedgerDbParams" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDbParams:NoUnexpectedThunks:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:noUnexpectedThunks">noUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:noUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:whnfNoUnexpectedThunks">whnfNoUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:whnfNoUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> &#8759; <a href="Data-SOP-Strict.html#t:Proxy" title="Data.SOP.Strict">Proxy</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LedgerDbParams:Rep:5"></span> <span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a></span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-155" class="link">Source</a> <a href="#t:LedgerDbParams" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LedgerDbParams:Rep:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> = <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;LedgerDbParams&quot; &quot;Ouroboros.Consensus.Storage.LedgerDB.InMemory&quot; &quot;ouroboros-consensus-0.1.0.0-inplace&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;LedgerDbParams&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;ledgerDbSecurityParam&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Ouroboros-Consensus-Config-SecurityParam.html#t:SecurityParam" title="Ouroboros.Consensus.Config.SecurityParam">SecurityParam</a>)))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:ledgerDbDefaultParams" class="def">ledgerDbDefaultParams</a> &#8759; <a href="Ouroboros-Consensus-Config-SecurityParam.html#t:SecurityParam" title="Ouroboros.Consensus.Config.SecurityParam">SecurityParam</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbDefaultParams" class="link">Source</a> <a href="#v:ledgerDbDefaultParams" class="selflink">#</a></p><div class="doc"><p>Default parameters</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbWithAnchor" class="def">ledgerDbWithAnchor</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbWithAnchor" class="link">Source</a> <a href="#v:ledgerDbWithAnchor" class="selflink">#</a></p><div class="doc"><p>Ledger DB starting at the specified ledger state</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbFromGenesis" class="def">ledgerDbFromGenesis</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; l &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbFromGenesis" class="link">Source</a> <a href="#v:ledgerDbFromGenesis" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h2>ChainSummary</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ChainSummary" class="def">ChainSummary</a> l r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ChainSummary" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></p><div class="doc"><p>Summary of the chain at a particular point in time</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ChainSummary" class="def">ChainSummary</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:csTip" class="def">csTip</a> &#8759; !(<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r)</dfn><div class="doc"><p>The tip of the chain</p></div></li><li><dfn class="src"><a id="v:csLength" class="def">csLength</a> &#8759; !<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></dfn><div class="doc"><p>Length of the chain</p></div></li><li><dfn class="src"><a id="v:csLedger" class="def">csLedger</a> &#8759; !l</dfn><div class="doc"><p>Ledger state</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ChainSummary" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainSummary:Eq:1"></span> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> l) &#8658; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-204" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainSummary:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainSummary:Show:2"></span> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> r, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> l) &#8658; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-204" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainSummary:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainSummary:Generic:3"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-204" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainSummary:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r) &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r) x &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainSummary:NoUnexpectedThunks:4"></span> (<a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> r, <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> l) &#8658; <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-204" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainSummary:NoUnexpectedThunks:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:noUnexpectedThunks">noUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:noUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:whnfNoUnexpectedThunks">whnfNoUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:whnfNoUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> &#8759; <a href="Data-SOP-Strict.html#t:Proxy" title="Data.SOP.Strict">Proxy</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainSummary:Serialise:5"></span> (Serialise l, Serialise r) &#8658; Serialise (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-753" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainSummary:Serialise:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:encode">encode</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; Encoding</p><p class="src"><a href="#v:decode">decode</a> &#8759; Decoder s (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</p><p class="src"><a href="#v:encodeList">encodeList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r] &#8594; Encoding</p><p class="src"><a href="#v:decodeList">decodeList</a> &#8759; Decoder s [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainSummary:Rep:6"></span> <span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-204" class="link">Source</a> <a href="#t:ChainSummary" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainSummary:Rep:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r) = <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;ChainSummary&quot; &quot;Ouroboros.Consensus.Storage.LedgerDB.InMemory&quot; &quot;ouroboros-consensus-0.1.0.0-inplace&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;ChainSummary&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;csTip&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r)) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;csLength&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;csLedger&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> l))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:encodeChainSummary" class="def">encodeChainSummary</a> &#8759; (l &#8594; Encoding) &#8594; (r &#8594; Encoding) &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r &#8594; Encoding <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#encodeChainSummary" class="link">Source</a> <a href="#v:encodeChainSummary" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:decodeChainSummary" class="def">decodeChainSummary</a> &#8759; (&#8704; s. Decoder s l) &#8594; (&#8704; s. Decoder s r) &#8594; &#8704; s. Decoder s (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r) <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#decodeChainSummary" class="link">Source</a> <a href="#v:decodeChainSummary" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h2>Queries</h2></a><div class="top"><p class="src"><a id="v:ledgerDbCurrent" class="def">ledgerDbCurrent</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; l <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbCurrent" class="link">Source</a> <a href="#v:ledgerDbCurrent" class="selflink">#</a></p><div class="doc"><p>The ledger state at the tip of the chain</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbTip" class="def">ledgerDbTip</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbTip" class="link">Source</a> <a href="#v:ledgerDbTip" class="selflink">#</a></p><div class="doc"><p>Reference to the block at the tip of the chain</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbAnchor" class="def">ledgerDbAnchor</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ChainSummary" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ChainSummary</a> l r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbAnchor" class="link">Source</a> <a href="#v:ledgerDbAnchor" class="selflink">#</a></p><div class="doc"><p>Information about the state of the ledger <em>before</em></p></div></div><a href="#g:4" id="g:4"><h2>Past ledger states</h2></a><div class="top"><p class="src"><a id="v:ledgerDbPast" class="def">ledgerDbPast</a> &#8759; &#8704; l r ro. (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> ro, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r) &#8658; (r &#8594; ro) &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> l <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbPast" class="link">Source</a> <a href="#v:ledgerDbPast" class="selflink">#</a></p><div class="doc"><p>Get a past ledger state</p><p>\( O(\log n * \log n) \).</p><p>When no <code>Checkpoint</code> (or anchor) has the given <code><code><a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a></code> r</code>, <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code> is
 returned.</p><p>To avoid a linear search on the checkpoints (typically 2160 of them), we do a
 binary search benefitting from the cheap splits of the underlying
 <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Data-Sequence-Strict.html#t:StrictSeq" title="Data.Sequence.Strict">StrictSeq</a></code> \( O(\log n) \).</p><p>For a binary search, the checkpoints have to be ordered by <code>r</code>. In practice,
 we'll use <code><a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a></code> for <code>r</code>, which, because of the existence of EBBs,
 doesn't have a reliable ordering: it orders first on <code><a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></code>, which is
 correct. But in case of a tie, it will look at the hash, which is not what we
 need: an EBB has the same slot as the block after it, so we'd want the
 <code><a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a></code> of an EBB to be <em>less</em> than the <code><a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a></code> of the regular block
 in the same slot. But the decision is made based on the hash, so we won't get
 a reliable answer.</p><p>Therefore, we take a projection <code>refOrder :: r -&gt; ro</code> as an argument. The
 <code>ro</code> type should have a correct ordering, so that the list below is correctly
 ordered:</p><pre>map (refOrder . cpBlock) $ Seq.toList (ledgerDbCheckpoints db)</pre><p>When instantiating <code>r</code> to <code><a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a></code>, one should use <code><a href="Ouroboros-Consensus-Block-RealPoint.html#v:realPointSlot" title="Ouroboros.Consensus.Block.RealPoint">realPointSlot</a></code> as
 <code>refOrder</code>.</p><p>Note: we don't use <code>fingertree</code> for the checkpoints (with its <code>search</code>
 operation we could use here) because we'd have to impose more constraints on
 the <code>r</code> type. We could do an interpolation search if we assume more about the
 <code>ro</code> parameter (<code><a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></code>), but that would be more complicated.</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbPastLedgers" class="def">ledgerDbPastLedgers</a> &#8759; (l &#8594; a) &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; (a, <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Data-Sequence-Strict.html#t:StrictSeq" title="Data.Sequence.Strict">StrictSeq</a> a) <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbPastLedgers" class="link">Source</a> <a href="#v:ledgerDbPastLedgers" class="selflink">#</a></p><div class="doc"><p>Apply the given function to all past ledgers in the <code><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a></code>, including
 the one stored at the anchor.</p><p>\( O(n) \)</p></div></div><a href="#g:5" id="g:5"><h2>Running updates</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Ap" class="def">Ap</a> &#8759; (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <span class="keyword">where</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#Ap" class="link">Source</a> <a href="#t:Ap" class="selflink">#</a></p><div class="doc"><p><code><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a></code> is used to pass information about blocks to ledger DB updates</p><p>The constructors serve two purposes:</p><ul><li>Specify the various parameters
   a. Are we passing the block by value or by reference?
   b. Are we applying or reapplying the block?</li><li>Compute the constraint <code>c</code> on the monad <code>m</code> in order to run the query:
   a. If we are passing a block by reference, we must be able to resolve it.
   b. If we are applying rather than reapplying, we might have ledger errors.</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ReapplyVal" class="def">ReapplyVal</a> &#8759; r &#8594; b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ApplyVal" class="def">ApplyVal</a> &#8759; r &#8594; b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ThrowsLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ThrowsLedgerError</a> l r m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ReapplyRef" class="def">ReapplyRef</a> &#8759; r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolvesBlocks" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolvesBlocks</a> r b m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ApplyRef" class="def">ApplyRef</a> &#8759; r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolvesBlocks" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolvesBlocks</a> r b m, <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ThrowsLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ThrowsLedgerError</a> l r m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Weaken" class="def">Weaken</a> &#8759; c' &#8658; c &#8658; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c'</td><td class="doc"><p><code><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#v:Weaken" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Weaken</a></code> increases the constraint on the monad <code>m</code>.</p><p>This is primarily useful when combining multiple <code><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a></code>s in a single
 homogeneous structure.</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AnnLedgerError" class="def">AnnLedgerError</a> l r <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#AnnLedgerError" class="link">Source</a> <a href="#t:AnnLedgerError" class="selflink">#</a></p><div class="doc"><p>Annotated ledger errors</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AnnLedgerError" class="def">AnnLedgerError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:annLedgerState" class="def">annLedgerState</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r</dfn><div class="doc"><p>The ledger DB just <em>before</em> this block was applied</p></div></li><li><dfn class="src"><a id="v:annLedgerErrRef" class="def">annLedgerErrRef</a> &#8759; r</dfn><div class="doc"><p>Reference to the block that had the error</p></div></li><li><dfn class="src"><a id="v:annLedgerErr" class="def">annLedgerErr</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l</dfn><div class="doc"><p>The ledger error itself</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:AnnLedgerError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:AnnLedgerError:ThrowsLedgerError:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ThrowsLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ThrowsLedgerError</a> l r (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) m)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-291" class="link">Source</a> <a href="#t:AnnLedgerError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:AnnLedgerError:ThrowsLedgerError:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwLedgerError">throwLedgerError</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; r &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) m a <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#throwLedgerError" class="link">Source</a> <a href="#v:throwLedgerError" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ResolveBlock" class="def">ResolveBlock</a> m r b = r &#8594; m b <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ResolveBlock" class="link">Source</a> <a href="#t:ResolveBlock" class="selflink">#</a></p><div class="doc"><p>Resolve a block</p><p>Resolving a block reference to the actual block lives in <code>m</code> because
 it might need to read the block from disk (and can therefore not be
 done inside an STM transaction).</p><p>NOTE: The ledger DB will only ask the <code>ChainDB</code> for blocks it knows
 must exist. If the <code>ChainDB</code> is unable to fulfill the request, data
 corruption must have happened and the <code>ChainDB</code> should trigger
 validation mode.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a id="t:ResolvesBlocks" class="def">ResolvesBlocks</a> r b m | m &#8594; b <span class="keyword">where</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ResolvesBlocks" class="link">Source</a> <a href="#t:ResolvesBlocks" class="selflink">#</a></p><div class="doc"><p>Monads in which we can resolve blocks</p><p>To guide type inference, we insist that we must be able to infer the type
 of the block we are resolving from the type of the monad.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:resolveBlock" class="def">resolveBlock</a> &#8759; r &#8594; m b <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#resolveBlock" class="link">Source</a> <a href="#v:resolveBlock" class="selflink">#</a></p></div><div class="subs instances"><details id="i:ResolvesBlocks" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ResolvesBlocks:ResolvesBlocks:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolvesBlocks" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolvesBlocks</a> r b (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> e (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m))</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-271" class="link">Source</a> <a href="#t:ResolvesBlocks" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ResolvesBlocks:ResolvesBlocks:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:resolveBlock">resolveBlock</a> &#8759; r &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> e (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m) b <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#resolveBlock" class="link">Source</a> <a href="#v:resolveBlock" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ResolvesBlocks:ResolvesBlocks:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolvesBlocks" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolvesBlocks</a> r b (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-262" class="link">Source</a> <a href="#t:ResolvesBlocks" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ResolvesBlocks:ResolvesBlocks:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:resolveBlock">resolveBlock</a> &#8759; r &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m b <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#resolveBlock" class="link">Source</a> <a href="#v:resolveBlock" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a id="t:ThrowsLedgerError" class="def">ThrowsLedgerError</a> l r m <span class="keyword">where</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ThrowsLedgerError" class="link">Source</a> <a href="#t:ThrowsLedgerError" class="selflink">#</a></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:throwLedgerError" class="def">throwLedgerError</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; r &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l &#8594; m a <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#throwLedgerError" class="link">Source</a> <a href="#v:throwLedgerError" class="selflink">#</a></p></div><div class="subs instances"><details id="i:ThrowsLedgerError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ThrowsLedgerError:ThrowsLedgerError:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ThrowsLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ThrowsLedgerError</a> l r (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) m)</span> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#line-291" class="link">Source</a> <a href="#t:ThrowsLedgerError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ThrowsLedgerError:ThrowsLedgerError:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">Ouroboros.Consensus.Storage.LedgerDB.InMemory</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwLedgerError">throwLedgerError</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; r &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerErr" title="Ouroboros.Consensus.Ledger.Basics">LedgerErr</a> l &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) m a <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#throwLedgerError" class="link">Source</a> <a href="#v:throwLedgerError" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:defaultThrowLedgerErrors" class="def">defaultThrowLedgerErrors</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) m a &#8594; m (<a href="Ouroboros-Consensus-HardFork-Combinator-Degenerate.html#t:Either" title="Ouroboros.Consensus.HardFork.Combinator.Degenerate">Either</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) a) <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#defaultThrowLedgerErrors" class="link">Source</a> <a href="#v:defaultThrowLedgerErrors" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:defaultResolveBlocks" class="def">defaultResolveBlocks</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m a &#8594; m a <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#defaultResolveBlocks" class="link">Source</a> <a href="#v:defaultResolveBlocks" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:defaultResolveWithErrors" class="def">defaultResolveWithErrors</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ExceptT" title="Cardano.Prelude.Base">ExceptT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:ReaderT" title="Cardano.Prelude.Base">ReaderT</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ResolveBlock" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ResolveBlock</a> m r b) m) a &#8594; m (<a href="Ouroboros-Consensus-HardFork-Combinator-Degenerate.html#t:Either" title="Ouroboros.Consensus.HardFork.Combinator.Degenerate">Either</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:AnnLedgerError" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">AnnLedgerError</a> l r) a) <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#defaultResolveWithErrors" class="link">Source</a> <a href="#v:defaultResolveWithErrors" class="selflink">#</a></p></div><a href="#g:6" id="g:6"><h2>Updates</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ExceededRollback" class="def">ExceededRollback</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ExceededRollback" class="link">Source</a> <a href="#t:ExceededRollback" class="selflink">#</a></p><div class="doc"><p>Exceeded maximum rollback supported by the current ledger DB state</p><p>Under normal circumstances this will not arise. It can really only happen
 in the presence of data corruption (or when switching to a shorter fork,
 but that is disallowed by all currently known Ouroboros protocols).</p><p>Records both the supported and the requested rollback.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ExceededRollback" class="def">ExceededRollback</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:rollbackMaximum" class="def">rollbackMaximum</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:rollbackRequested" class="def">rollbackRequested</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:ledgerDbPush" class="def">ledgerDbPush</a> &#8759; &#8704; m c l r b. (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, c) &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; m (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r) <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbPush" class="link">Source</a> <a href="#v:ledgerDbPush" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ledgerDbSwitch" class="def">ledgerDbSwitch</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbSwitch" class="link">Source</a> <a href="#v:ledgerDbSwitch" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, c)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></td><td class="doc"><p>How many blocks to roll back</p></td></tr><tr><td class="src">&#8594; [<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:Ap" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">Ap</a> m l r b c]</td><td class="doc"><p>New blocks to apply</p></td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; m (<a href="Ouroboros-Consensus-HardFork-Combinator-Degenerate.html#t:Either" title="Ouroboros.Consensus.HardFork.Combinator.Degenerate">Either</a> <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:ExceededRollback" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ExceededRollback</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Switch to a fork</p></div></div><a href="#g:7" id="g:7"><h1>Exports for the benefit of tests</h1></a><a href="#g:8" id="g:8"><h2>Additional queries</h2></a><div class="top"><p class="src"><a id="v:ledgerDbChainLength" class="def">ledgerDbChainLength</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbChainLength" class="link">Source</a> <a href="#v:ledgerDbChainLength" class="selflink">#</a></p><div class="doc"><p>Total length of the chain (in terms of number of blocks)</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbToList" class="def">ledgerDbToList</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; [(r, l)] <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbToList" class="link">Source</a> <a href="#v:ledgerDbToList" class="selflink">#</a></p><div class="doc"><p>References to blocks and corresponding ledger state (from old to new)</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbMaxRollback" class="def">ledgerDbMaxRollback</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbMaxRollback" class="link">Source</a> <a href="#v:ledgerDbMaxRollback" class="selflink">#</a></p><div class="doc"><p>How many blocks can we currently roll back?</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbSnapshots" class="def">ledgerDbSnapshots</a> &#8759; &#8704; l r. <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; [(<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>, l)] <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbSnapshots" class="link">Source</a> <a href="#v:ledgerDbSnapshots" class="selflink">#</a></p><div class="doc"><p>All snapshots currently stored by the ledger DB (new to old)</p><p>This also includes the snapshot at the anchor. For each snapshot we also
 return the distance from the tip.</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbIsSaturated" class="def">ledgerDbIsSaturated</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbIsSaturated" class="link">Source</a> <a href="#v:ledgerDbIsSaturated" class="selflink">#</a></p><div class="doc"><p>Have we seen at least <code>k</code> blocks?</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbCountToPrune" class="def">ledgerDbCountToPrune</a> &#8759; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDbParams" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDbParams</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbCountToPrune" class="link">Source</a> <a href="#v:ledgerDbCountToPrune" class="selflink">#</a></p><div class="doc"><p>Internal: count number of checkpoints to prune, given total number of
 checkpoints</p><p>This is exposed for the benefit of tests only.</p></div></div><div class="top"><p class="src"><a id="v:ledgerDbPastSpec" class="def">ledgerDbPastSpec</a> &#8759; &#8704; l r. <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> r &#8658; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> r &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l r &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> l <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbPastSpec" class="link">Source</a> <a href="#v:ledgerDbPastSpec" class="selflink">#</a></p><div class="doc"><p>Get a past ledger state</p><p>\( O(n) \)</p><p>Straightforward implementation of <code><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#v:ledgerDbPast" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ledgerDbPast</a></code> using a linear search.</p><p>Can be used in tests to compare against <code><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#v:ledgerDbPast" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">ledgerDbPast</a></code>.</p></div></div><a href="#g:9" id="g:9"><h2>Pure API</h2></a><div class="top"><p class="src"><a id="v:ledgerDbPush-39-" class="def">ledgerDbPush'</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbPush%27" class="link">Source</a> <a href="#v:ledgerDbPush-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ledgerDbPushMany-39-" class="def">ledgerDbPushMany'</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; [b] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbPushMany%27" class="link">Source</a> <a href="#v:ledgerDbPushMany-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ledgerDbSwitch-39-" class="def">ledgerDbSwitch'</a> &#8759; &#8704; l b. <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:ApplyBlock" title="Ouroboros.Consensus.Ledger.Abstract">ApplyBlock</a> l b &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerCfg" title="Ouroboros.Consensus.Ledger.Basics">LedgerCfg</a> l &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> &#8594; [b] &#8594; <a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html#t:LedgerDB" title="Ouroboros.Consensus.Storage.LedgerDB.InMemory">LedgerDB</a> l b) <a href="src/Ouroboros.Consensus.Storage.LedgerDB.InMemory.html#ledgerDbSwitch%27" class="link">Source</a> <a href="#v:ledgerDbSwitch-39-" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>